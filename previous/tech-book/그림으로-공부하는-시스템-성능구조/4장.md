## 4.1 성능과 튜닝

- 컴퓨터에서는 1바이트, 2바이트가 아닌 수천 바이트를 하나의 덩어리로 처리
  - 이것이 바로 **블록** 또는 **페이지**
- 메모리 내에서도 OS는 페이지 단위로 처리함.
- 저장소는 블록 단위로 처리.
  - 즐록을 모은 Segement란 단위도 있음.





## 4.2 고속화와 병렬화

- 고속화는 거의 만능 (클록이 좋은 CPU로 교체하거나, 코어 수가 많은 CPU로 교체)
- 그렇지만 병렬화는 처리에 따라 결과가 달라질 수 있음.



## 4.3 스케일업, 스케일 아웃

- 서버 장비 자체의 사양을 높이는 것이 스케일 업 scale up
  - CPU 추가나, 클록업이 이에 해당
- 스케일 아웃은 서버를 늘려서 성능을 향상 시키는 방법
- 어떨 경우에 어떤 것을 선택해야할까?
  - 웹서버, AP 서버는 각 처리가 독립된 경우가 많다 --> 스케일 아웃해도 괜찮을 것
  - 배치 서버 DB 서버는 각 처리들이 독립되지 않을 경우가 많기 때문에 --> 스케일 업이 좋을 것



## 4.4 종속성

- 시간 종속성 : 최근 사용된 데이터 일수록 재 접근 가능성이 높은것, 예를 들면 캐시
- 공간 종속성 : 사용된 데이터에 가까이 있는 데이터가 다음에 사용될 가능성이 높은 경우
  - 블록, 페이지, 덩어리!, 덩어리로 처리한다는 이점 중 하나가 이 공간적 종속성
- 순차적 종속성 : 사용된 데이터 옆에 있는 데이터가 다음번에 사용될 가능성이 높은 것





## 4.5 대역제어

- 대역 제어는 Load Balancer에서 실시됨.



## 4.6 LRU

- Least Recently Used : 최근에 사용되지 않은 데이터를 버리는 알고리즘
- DBMS, 저장소 내부, 캐시등에서 자주 사용되는 방식



## 4.7 부하분산, 라운드 로빈

- 스케일 아웃인 경우 서버가 여러대 구성됨.
  - 대기 행렬 이론 관점에서는 노는 서버가 없도록 해야한다? 어떻게 해야할까?
- 부하분산, 로드 밸랜서를 이용
- 기본적으로는 라운드 로빈 Round Robin 방식으로 돌아간다.
  - 전체적으로 작업을 분배함으로써, 모든 리소스를 사용해서 성능을 향상 시키는 방법



## 4.8 COW

- Copy On Write
- 필요한 시점에 실제 데이터를 작성하는 방법
- 예를 들면 OS에서는 프로세를 생성할 때 복사하지만, 이때 실제 프로세스는 복사하지 않고 변경되는 시점에서 복사를 한다
  - 장점? 복사 속도
    - 실제 데이터를 복사 하지 않기 때문에 빠르게 처리되며, 같은 데이터에 중복이 발생하지 않는다는 이점도 있음.



## 4.9 낙관적인 락

- 락은 필요한 것이지만, 없더라도 굳이 문제가 되지는 않음.
- 최후의 수단으로 롤백하는 방법도 있고
- 위와 같은 방법을 낙관적 락이라함
  - 비관적 락도 있는데, 일반적으로 우리가 생각하는 락에 해당한다.
- 낙관적인 락은 락 경합이 심한 경우에는 롤백이 많아지니까, 추천하지 않음.
  - 갱신 빈도가 적은 경우에는 적합하다!

